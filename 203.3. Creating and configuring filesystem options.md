**203.3 Creating and configuring filesystem options**

**Weight:** 2

**Description: **Candidates should be able to configure automount filesystems using AutoFS. This objective includes configuring automount for network and device filesystems. Also included is creating filesystems for devices such as CD-ROMs and a basic feature knowledge of encrypted filesystems.

**Key Knowledge Areas:**

* autofs configuration files
* Understanding of automount units
* UDF and ISO9660 tools and utilities
* Awareness of other CD-ROM filesystems \(HFS\)
* Awareness of CD-ROM filesystem extensions \(Joliet, Rock Ridge, El Torito\)
* Basic feature knowledge of data encryption \(dm-crypt / LUKS\)

**Terms and Utilities:**

* /etc/auto.master
* /etc/auto.\[dir\]
* mkisofs
* cryptsetup

#### autofs

We have already worked with fstab and its usage. When we mount a device using fstab it is always mounted and ready.It is okey except when we are using nfs, cifs, ... trough the network. autofs idea is mount when you need. that is all! this way we avoid network over head . 

```
root@server1:~# apt install autofs
```

autofs puts its configuration files in /etc directory :

```
root@server1:~# ls -l /etc/auto*
-rw-r--r-- 1 root root 12596 Jun 22  2017 /etc/autofs.conf
-rw-r--r-- 1 root root   797 Jun 22  2017 /etc/auto.master
-rw-r--r-- 1 root root   524 Jun 22  2017 /etc/auto.misc
-rwxr-xr-x 1 root root  1039 Jun 22  2017 /etc/auto.net
-rwxr-xr-x 1 root root  2191 Jun 22  2017 /etc/auto.smb
```

#### auto.master

auto.master is autofs main configuration and it is  first configuration file autofs checks. Inside autofs.master we mention where we want to be mount folder and where is related configuration file. It is strange but that is the way autofs works. So beside auto.master file , you might see other auto.\[\*\] configuration files which auto.master refers to, to create and mount.

![](/assets/autofs.jpg)

and the result would be /mynfs/dir1 . Lets make our hands dirty and see what is inside auto.master:

```
#
# Sample auto.master file
# This is a 'master' automounter map and it has the following format:
# mount-point [map-type[,format]:]map [options]
# For details of the format look at auto.master(5).
#
#/misc	/etc/auto.misc
#
# NOTE: mounts done from a hosts map will be mounted with the
#	"nosuid" and "nodev" options unless the "suid" and "dev"
#	options are explicitly given.
#
#/net	-hosts
#
# Include /etc/auto.master.d/*.autofs
# The included files must conform to the format of this file.
#
+dir:/etc/auto.master.d
#
# Include central master map if it can be found using
# nsswitch sources.
#
# Note that if there are entries for /net or /misc (as
# above) in the included master map any keys that are the
# same will not be seen as the first read key seen takes
# precedence.
#
+auto.master

```







