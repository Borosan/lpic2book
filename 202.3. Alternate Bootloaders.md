1. [ ] ### **202.3 Alternate Bootloaders**

**Weight:** 2

Description: Candidates should be aware of other bootloaders and their major features.

**Key Knowledge Areas:**

* SYSLINUX, ISOLINUX, PXELINUX
* Understanding of PXE for both BIOS and UEFI
* Awareness of systemd-boot and U-Boot

**Terms and Utilities:**

* syslinux
* extlinux
* isolinux.bin
* isolinux.cfg
* isohdpfx.bin
* efiboot.img
* pxelinux.0
* pxelinux.cfg/
* uefi/shim.efi
* uefi/grubx64.efi

#### Linux Boot Loader

The grandfather of all linux boot loaders is LiLo \(Linux boot Loader\). LiLo has its configuration file in /etc/lilo.conf which was compiled to binary and reside on first sectors of hard disk. But all those good days of simplicity have been passed.

```
#sample lilo.conf of system configured to boot 2 operating system.
boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
message=/boot/message
lba32
default=linux

image=/boot/vmlinuz-2.4.0-0.43.6
    label=linux
    initrd=/boot/initrd-2.4.0-0.43.6.img
    read-only
    root=/dev/hda5

other=/dev/hda1
    label=dos
```

LiLo has some shortages which is way grub and grub2 has developed. But beside these Boot Loaders there are some other Boot Loaders which are not leaders but have been developed for specific purposes. As not all system has ext file system, we might need to load linux from inside of other files systems or partitions:

| Boor Loader | Supported File System\(s\) | Used Media |
| :--- | :--- | :--- |
| syslinux | ms-dos \(FAT32\) | USB |
| ext linux | FAT32 , ext3, ext4 | usually used on Hard Disk |
| iso linux | create .iso files | CD/DVD |

Lets try syslinux

```
root@server1:~# lsblk
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sdb      8:16   1  7.5G  0 disk 
└─sdb1   8:17   1  7.5G  0 part 
sr0     11:0    1 1024M  0 rom  
fd0      2:0    1    4K  0 disk 
sda      8:0    0   50G  0 disk 
├─sda5   8:5    0 1021M  0 part [SWAP]
└─sda1   8:1    0   49G  0 part /
root@server1:~# fdisk -l /dev/sdb
Disk /dev/sdb: 7.5 GiB, 8027897856 bytes, 15679488 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0xde86c489

Device     Boot Start      End  Sectors  Size Id Type
/dev/sdb1        2048 15679487 15677440  7.5G  b W95 FAT32
root@server1:~# mount /dev/sdb1 /mnt/myflash/

root@server1:~# syslinux -i /dev/sdb1

root@server1:~# cd syslinux-6.03/
root@server1:~/syslinux-6.03# ls
bios      diag     efi32      libfat        mbr      now.pl         version
codepage  doc      efi64      libinstaller  memdisk  README         version.pl
com32     dos      extlinux   linux         mime     sample         win
COPYING   dosutil  gen-id.sh  lzo           mk       syslinux.spec  win32
core      dummy.c  gnu-efi    Makefile      mtools   txt            win64
devel     efi      gpxe       man           NEWS     utils

root@server1:~/syslinux-6.03# find . -name mbr.bin
./bios/mbr/mbr.bin
./efi32/mbr/mbr.bin
./efi64/mbr/mbr.bin
root@server1:~/syslinux-6.03# cd bios/mbr/
root@server1:~/syslinux-6.03/bios/mbr# dd conv=notrunc bs=440 count=1 if=mbr.bin of=/dev/sdb
1+0 records in
1+0 records out
440 bytes copied, 0.00027186 s, 1.6 MB/s

root@server1:~/syslinux-6.03/bios/mbr# parted /dev/sdb set 1 boot on
Information: You may need to update /etc/fstab.

root@server1:~/syslinux-6.03/bios/mbr# cd /mnt/myflash/ && ls             
ldlinux.c32  ldlinux.sys

root@server1:/mnt/myflash# cp -R /media/payam/KNOPPIX/* .
root@server1:/mnt/myflash# ls
boot  index.html  KNOPPIX  ldlinux.c32  ldlinux.sys  lost+found
root@server1:/mnt/myflash# cd boot/ && ls
isolinux
root@server1:/mnt/myflash/boot# mv isolinux syslinux
root@server1:/mnt/myflash/boot# cd syslinux/
root@server1:/mnt/myflash/boot/syslinux# ls
boot.cat  f2  german.kbd    isolinux.cfg  logo.16
boot.msg  f3  isolinux.bin  linux24       minirt24.gz
root@server1:/mnt/myflash/boot/syslinux# mv isolinux.cfg syslinux.cfg

root@server1:/mnt/myflash/boot/syslinux# cat syslinux.cfg 
DEFAULT linux24
APPEND ramdisk_size=100000 init=/etc/init lang=us apm=power-off vga=791 initrd=minirt24.gz nomce noapic quiet BOOT_IMAGE=knoppix
TIMEOUT 300

PROMPT 1
DISPLAY boot.msg
F1 boot.msg
F2 f2
F3 f3
LABEL dsl
KERNEL linux24
APPEND ramdisk_size=100000 init=/etc/init lang=us apm=power-off vga=791 initrd=minirt24.gz nomce noapic quiet BOOT_IMAGE=knoppix
LABEL memtest
KERNEL memtest
APPEND initrd=
LABEL dsl-txt
KERNEL linux24
APPEND ramdisk_size=100000 init=/etc/init lang=us apm=power-off vga=normal initrd=minirt24.gz nomce noapic quiet BOOT_IMAGE=knoppix
LABEL expert
KERNEL linux24
APPEND ramdisk_size=100000 init=/etc/init lang=us apm=power-off vga=791 initrd=minirt24.gz nomce BOOT_IMAGE=expert
LABEL fb1280x1024
KERNEL linux24
APPEND ramdisk_size=100000 init=/etc/init lang=us apm=power-off vga=794 xmodule=fbdev initrd=minirt24.gz nomce noapic quiet BOOT_IMAGE=knoppix
LABEL fb1024x768
KERNEL linux24
APPEND ramdisk_size=100000 init=/etc/init lang=us apm=power-off vga=791 xmodule=fbdev initrd=minirt24.gz nomce noapic quiet BOOT_IMAGE=knoppix
LABEL fb800x600
KERNEL linux24
APPEND ramdisk_size=100000 init=/etc/init lang=us apm=power-off vga=788 xmodule=fbdev initrd=minirt24.gz nomce noapic quiet BOOT_IMAGE=knoppix
LABEL lowram
KERNEL linux24
APPEND ramdisk_size=100000 init=/etc/init lang=us apm=power-off vga=normal initrd=minirt24.gz noscsi noideraid nosound nousb nofirewire noicons minimal nomce noapic noapm lowram quiet BOOT_IMAGE=knoppix
LABEL install
KERNEL linux24
APPEND ramdisk_size=100000 init=/etc/init lang=us apm=power-off vga=normal initrd=minirt24.gz noscsi noideraid nosound nofirewire legacy base norestore _install_ nomce noapic noapm quiet BOOT_IMAGE=knoppix
LABEL failsafe
KERNEL linux24
APPEND ramdisk_size=100000 init=/etc/init 2 lang=us vga=normal atapicd nosound noscsi nousb nopcmcia nofirewire noagp nomce nodhcp xmodule=vesa initrd=minirt24.gz BOOT_IMAGE=knoppix base norestore legacy
LABEL userdef
KERNEL linux24
APPEND ###############################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################################
```



