1. [ ] ### **202.3 Alternate Bootloaders**

**Weight:** 2

Description: Candidates should be aware of other bootloaders and their major features.

**Key Knowledge Areas:**

* SYSLINUX, ISOLINUX, PXELINUX
* Understanding of PXE for both BIOS and UEFI
* Awareness of systemd-boot and U-Boot

**Terms and Utilities:**

* syslinux
* extlinux
* isolinux.bin
* isolinux.cfg
* isohdpfx.bin
* efiboot.img
* pxelinux.0
* pxelinux.cfg/
* uefi/shim.efi
* uefi/grubx64.efi

#### Linux Boot Loader

The grandfather of all linux boot loaders is LiLo \(Linux boot Loader\). LiLo has its configuration file in /etc/lilo.conf which was compiled to binary and reside on first sectors of hard disk. But all those good days of simplicity have been passed.

```
#sample lilo.conf of system configured to boot 2 operating system.
boot=/dev/hda
map=/boot/map
install=/boot/boot.b
prompt
timeout=50
message=/boot/message
lba32
default=linux

image=/boot/vmlinuz-2.4.0-0.43.6
    label=linux
    initrd=/boot/initrd-2.4.0-0.43.6.img
    read-only
    root=/dev/hda5

other=/dev/hda1
    label=dos
```

LiLo has some shortages which is way grub and grub2 has developed. But beside these Boot Loaders there are some other Boot Loaders which are not leaders but have been developed for specific purposes. As not all system has ext file system, we might need to load linux from inside of other files systems or partitions:

| Boor Loader | Supported File System\(s\) | Used Media |
| :--- | :--- | :--- |
| syslinux | ms-dos \(FAT32\) | USB |
| ext linux | FAT32 , ext3, ext4 | usually used on Hard Disk |
| iso linux | create .iso files | CD/DVD |

### syslinux

Lets try syslinux , we want to make a bootable usb disk using syslinux on 8 gig flash with FAT32 file system:

```
root@server1:~# lsblk
NAME   MAJ:MIN RM  SIZE RO TYPE MOUNTPOINT
sdb      8:16   1  7.5G  0 disk 
└─sdb1   8:17   1  7.5G  0 part /media/myflash
sr0     11:0    1  1.5G  0 rom  /media/payam/Ubuntu 16.04.3 LTS amd64
fd0      2:0    1    4K  0 disk 
sda      8:0    0   50G  0 disk 
├─sda2   8:2    0    1K  0 part 
├─sda5   8:5    0 1021M  0 part [SWAP]
└─sda1   8:1    0   49G  0 part /
root@server1:~# umount /media/myflash 
root@server1:~# mkfs.vfat -F 32 -n KING8GIG /dev/sdb1
mkfs.fat 3.0.28 (2015-05-16)
root@server1:~# fdisk -l /dev/sdb1
Disk /dev/sdb1: 7.5 GiB, 8026849280 bytes, 15677440 sectors
Units: sectors of 1 * 512 = 512 bytes
Sector size (logical/physical): 512 bytes / 512 bytes
I/O size (minimum/optimal): 512 bytes / 512 bytes
Disklabel type: dos
Disk identifier: 0x00000000
```

Lets install syslinux in our system:

```
root@server1:~# apt install syslinux syslinux-utils
```

And install syslinux on the flash:

```
root@server1:~# syslinux -maf /dev/sdb1
```

This command  copy  tiny file /usr/lib/syslinux/mbr/mbr.bin on the first 512 bytes of flash disk and make it bootbale.

```
root@server1:~# mount /dev/sdb1 /media/myflash/
root@server1:~# mkdir /media/myflash/syslinux
root@server1:~# cp /usr/lib/syslinux/modules/bios/{libcom32.c32,libutil.c32,poweroff.c32,reboot.c32,vesamenu.c32} /media/myflash/syslinux/
```

make a folder in order to put linux sources there:

```
root@server1:~# mkdir /media/myflash/iso
```

syslinux configuration file is syslinux.cfg, create like this:

```
DEFAULT Ubuntu_1404
PROMPT 0
allowoptions 0
TIMEOUT 100
UI vesamenu.c32
MENU TITLE USB Multiboot Key
MENU BACKGROUND splash02.png
MENU COLOR border 30;44 #40ffffff #a0000000 std
MENU COLOR title 1;36;44 #9033ccff #a0000000 std
MENU COLOR sel 7;37;40 #e0ffffff #20ffffff all
MENU COLOR unsel 37;44 #50ffffff #a0000000 std
MENU COLOR help 37;40 #c0ffffff #a0000000 std
MENU COLOR timeout_msg 37;40 #80ffffff #00000000 std
MENU COLOR timeout 1;37;40 #c0ffffff #00000000 std
MENU COLOR msg07 37;40 #90ffffff #a0000000 std
MENU COLOR tabmsg 31;40 #30ffffff #00000000 std
MENU WIDTH 80
MENU MARGIN 10
MENU ROWS 15        # number of rows in the menu
MENU TABMSGROW 18
MENU CMDLINEROW 18
MENU ENDROW -1
MENU PASSWORDROW 11
MENU TIMEOUTROW 20
MENU HELPMSGROW 22
MENU HELPMSGENDROW -1
MENU HIDDENROW -2
MENU HSHIFT 0
MENU VSHIFT 4   # vertical position of the menu

LABEL Ubuntu_1404
MENU LABEL Ubuntu 14.04 Trusty Thar
kernel /syslinux/iso/ubuntu_1404/casper/vmlinuz.efi
append initrd=/syslinux/iso/ubuntu_1404/casper/initrd.lz live-media-path=/syslinux/iso/ubuntu_1404/casper boot=live console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Xubuntu_1404
MENU LABEL Xubuntu 14.04
kernel /syslinux/iso/xubuntu_1404/casper/vmlinuz.efi
append initrd=/syslinux/iso/xubuntu_1404/casper/initrd.lz live-media-path=/syslinux/iso/xubuntu_1404/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Ubuntu_1504_mate
MENU LABEL Ubuntu Mate 15.04
kernel /syslinux/iso/ubuntu_1504_mate/casper/vmlinuz.efi
append initrd=/syslinux/iso/ubuntu_1504_mate/casper/initrd.lz live-media-path=/syslinux/iso/ubuntu_1504_mate/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Edubuntu_1404_64
MENU LABEL Edubuntu 14.04 64 bit
kernel /syslinux/iso/edubuntu_1404_64/casper/vmlinuz.efi
append initrd=/syslinux/iso/edubuntu_1404_64/casper/initrd.lz live-media-path=/syslinux/iso/edubuntu_1404_64/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Edubuntu_1404_32
MENU LABEL Edubuntu 14.04 32 bit
kernel /syslinux/iso/edubuntu_1404_32/casper/vmlinuz
append initrd=/syslinux/iso/edubuntu_1404_32/casper/initrd.lz live-media-path=/syslinux/iso/edubuntu_1404_32/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Elementary_OS_Freya
MENU LABEL Elementary OS Freya
kernel /syslinux/iso/eos_freya/casper/vmlinuz
append initrd=/syslinux/iso/eos_freya/casper/initrd.lz live-media-path=/syslinux/iso/eos_freya/casper LABEL Ubuntu_1404
MENU LABEL Ubuntu 14.04 Trusty Thar
kernel /syslinux/iso/ubuntu_1404/casper/vmlinuz.efi
append initrd=/syslinux/iso/ubuntu_1404/casper/initrd.lz live-media-path=/syslinux/iso/ubuntu_1404/casper boot=live console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Xubuntu_1404
MENU LABEL Xubuntu 14.04
kernel /syslinux/iso/xubuntu_1404/casper/vmlinuz.efi
append initrd=/syslinux/iso/xubuntu_1404/casper/initrd.lz live-media-path=/syslinux/iso/xubuntu_1404/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Ubuntu_1504_mate
MENU LABEL Ubuntu Mate 15.04
kernel /syslinux/iso/ubuntu_1504_mate/casper/vmlinuz.efi
append initrd=/syslinux/iso/ubuntu_1504_mate/casper/initrd.lz live-media-path=/syslinux/iso/ubuntu_1504_mate/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Edubuntu_1404_64
MENU LABEL Edubuntu 14.04 64 bit
kernel /syslinux/iso/edubuntu_1404_64/casper/vmlinuz.efi
append initrd=/syslinux/iso/edubuntu_1404_64/casper/initrd.lz live-media-path=/syslinux/iso/edubuntu_1404_64/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Edubuntu_1404_32
MENU LABEL Edubuntu 14.04 32 bit
kernel /syslinux/iso/edubuntu_1404_32/casper/vmlinuz
append initrd=/syslinux/iso/edubuntu_1404_32/casper/initrd.lz live-media-path=/syslinux/iso/edubuntu_1404_32/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Elementary_OS_Freya
MENU LABEL Elementary OS Freya
kernel /syslinux/iso/eos_freya/casper/vmlinuz
append initrd=/syslinux/iso/eos_freya/casper/initrd.lz live-media-path=/syslinux/iso/eos_freya/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL Kodibuntu_14_04
MENU LABEL Kodibuntu 14.04 64 bit
kernel /syslinux/iso/kodibuntu_1404/casper/vmlinuz
append initrd=/syslinux/iso/kodibuntu_1404/casper/initrd.lz live-media-path=/syslinux/iso/kodibuntu_1404/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

LABEL System_Rescue_CD_64
MENU LABEL System Rescue CD 4.5.4 64 bit
kernel /syslinux/iso/srcd/isolinux/rescue64
append initrd=/syslinux/iso/srcd/isolinux/initram.igz subdir=/syslinux/iso/srcd dostartx setkmap=it

LABEL System_Rescue_CD_32
MENU LABEL System Rescue CD 4.5.4 32 bit
kernel /syslinux/iso/srcd/isolinux/rescue32
append initrd=/syslinux/iso/srcd/isolinux/initram.igz subdir=/syslinux/iso/srcd dostartx setkmap=it

LABEL Zorin
MENU LABEL Zorin Educational 9 64 bit
kernel /syslinux/iso/zorin/casper/vmlinuz.efi
append initrd=/syslinux/iso/zorin/casper/initrd.lz live-media-path=/syslinux/iso/zorin/casper ignore_uuid boot=casper quiet splash --

LABEL LinuxMint
MENU LABEL Linux Mint Cinnamon 17.2 64 bit
kernel /syslinux/iso/mint/casper/vmlinuz
append initrd=/syslinux/iso/mint/casper/initrd.lz live-media-path=/syslinux/iso/mint/casper console-setup/layoutcode=it ignore_uuid boot=casper quiet splash --

MENU SEPARATOR

LABEL Reboot
MENU LABEL Reboot
COM32 reboot.c32

LABEL Power Off
MENU LABEL Power Off
COMBOOT poweroff.c32
```

Now make desired folder in /syslinux/iso/... and copy source files:

```
root@server1:~# mkdir /media/myflash/syslinux/iso
root@server1:~# mkdir /media/myflash/syslinux/iso/ubuntu_1404
root@server1:~# mkdir /media/ubuntu1404
root@server1:~# mount -t iso9660 -o loop,ro /tmp/ubuntu-14.04.3-desktop-amd64.iso /media/ubuntu1404/
root@server1:~# cp -r /media/ubuntu1404/* /media/myflash/syslinux/iso/ubuntu_1404/
cp: cannot create symbolic link '/media/myflash/syslinux/iso/ubuntu_1404/dists/stable': Operation not permitted
cp: cannot create symbolic link '/media/myflash/syslinux/iso/ubuntu_1404/dists/unstable': Operation not permitted
cp: cannot create symbolic link '/media/myflash/syslinux/iso/ubuntu_1404/ubuntu': Operation not permitted
```

as we are using FAT32 file system symbolic links are not supported so that right, lets chek:

![](/assets/syslinux.jpg)

### extlinux

extlinux is another member of syslinux family, lets install and use it intead of grub in our system:

```

```



