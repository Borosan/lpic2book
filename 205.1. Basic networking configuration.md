# **Topic 205: Network Configuration**

### **205.1 Basic networking configuration**

**Weight:** 3

**Description: **Candidates should be able to configure a network device to be able to connect to a local, wired or wireless, and a wide-area network. This objective includes being able to communicate between various subnets within a single network including both IPv4 and IPv6 networks.

**Key Knowledge Areas:**

* Utilities to configure and manipulate ethernet network interfaces
* Configuring basic access to wireless networks

**Terms and Utilities:**

* ip
* ifconfig
* route
* arp
* iw
* iwconfig
* iwlist

In this course we spend some time on Networking tools and review what we has learned. As more  experienced we become, less time we spend on troubleshooting.

### ifconfig

ifconfig  \(interface configuration\) is a utility  to configure, manage and query network interface parameters via command line interface or in a system configuration scripts.

The ifconfig command is used for displaying current network configuration information, setting up an ip address, netmask or broadcast address to an network interface, creating an alias for network interface, setting up hardware address and enable or disable network interfaces.

```
root@server1:~# ifconfig 
ens33     Link encap:Ethernet  HWaddr 00:0c:29:03:64:0d  
          inet addr:192.168.10.152  Bcast:192.168.10.255  Mask:255.255.255.0
          inet6 addr: fe80::6650:e873:a8c5:ea55/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:4583 errors:0 dropped:0 overruns:0 frame:0
          TX packets:2056 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:4402094 (4.4 MB)  TX bytes:138013 (138.0 KB)

lo        Link encap:Local Loopback  
          inet addr:127.0.0.1  Mask:255.0.0.0
          inet6 addr: ::1/128 Scope:Host
          UP LOOPBACK RUNNING  MTU:65536  Metric:1
          RX packets:255 errors:0 dropped:0 overruns:0 frame:0
          TX packets:255 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:19604 (19.6 KB)  TX bytes:19604 (19.6 KB)
```

Now let have a review over ifconfig command family:

| ifconfig command | Description |
| :--- | :--- |
| ifconfig | Display all Active Network Interfaces. |
| ifconfig -a | Display all Network Interfaces \(weather Enable or Disable\) |
| ifconfig eth0 | Network Settings of specific Interface |
| ifconfig eth0 \[up/down\] | Enable or Disable a Network Interface |
| ifconfig eth0 192.168.10.63 | Assign an IP Address   to Network Interface |
| ifconfig eth0 netmask 255.255.255.0 | Assign a Networkmask  to Network Interface |
| ifconfig broadcast  192.168.10.255 | Assign a Broadcast to Network Interface |
| ifconfig eth0 192.168.10.63 netmask 255.255.255.0 | Set both IP Address and netmask at the |
| ifconfig  eth0 hw ether AA:BB:CC:DD:EE:FF | Change the mac Address of Network  Interface |

##### mapping multiple IP addresses to a single NIC:

When we setup a system's network, we usually assign one IP address per network interface\(NIC\).This serves as the primary address.But in some situations we might require set multiple IP addresses on a machine. Good news is that we don not need one NIC per IP Address. Linux is capable of mapping multiple IP addresses to a single NIC by using IP aliasing

note that alias network address in same sub-net mask. For example, if your eth0 network ip address is 192.168.10.63, then alias ip address must be 192.168.10.64

```
root@server1:~# ifconfig ens33:0 192.168.10.153
root@server1:~# ifconfig ens33:0
ens33:0   Link encap:Ethernet  HWaddr 00:0c:29:03:64:0d  
          inet addr:192.168.10.153  Bcast:192.168.10.255  Mask:255.255.255.0
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
```

and to remove alias

```
root@server1:~# ifconfig ens33:0 down
root@server1:~# ifconfig ens33:0
ens33:0   Link encap:Ethernet  HWaddr 00:0c:29:03:64:0d  
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
```

note that alias network address in same sub-net mask. For example, if your eth0 network ip address is 192.168.10.63, then alias ip address must be 192.168.10.64.

##### Promiscuous Mode

In normal mode, when a packet received by a network card, it verifies that the packet belongs to itself. If not, it drops the packet normally, but in the promiscuous mode is used to accept all the packets that flows through the network card.

```
root@server1:~# ifconfig ens33 promisc    ### to enable promiscuous
root@server1:~# ifconfig ens33 -promisc    ###to disable promiscuous
```

##### MTU

The mtu argument set the maximum transmission unit to an interface. The MTU allows us to set the limit size of packets that are transmitted on an interface. The MTU able to handle maximum number of octets to an interface in one single transaction. Not all network interfaces supports MTU settings.

![](/assets/MTU.jpg)

to set mtu:

```
root@server1:~# ifconfig ens33
ens33     Link encap:Ethernet  HWaddr 00:0c:29:03:64:0d  
          inet addr:192.168.10.152  Bcast:192.168.10.255  Mask:255.255.255.0
          inet6 addr: fe80::6650:e873:a8c5:ea55/64 Scope:Link
          UP BROADCAST RUNNING MULTICAST  MTU:1500  Metric:1
          RX packets:489 errors:0 dropped:0 overruns:0 frame:0
          TX packets:1113 errors:0 dropped:0 overruns:0 carrier:0
          collisions:0 txqueuelen:1000 
          RX bytes:56725 (56.7 KB)  TX bytes:86720 (86.7 KB)

root@server1:~# ifconfig ens33 mtu 1600
root@server1:~# ifconfig ens33 | grep mtu
root@server1:~# ifconfig ens33 | grep -i mtu
          UP BROADCAST RUNNING MULTICAST  MTU:1600  Metric:1
```

### ip

As we said ifconfig is deprecated and it is replaced with ip command. ip command can show, manipulate routing, devices, policy routing and tunnels.

```
root@server1:~# ip
Usage: ip [ OPTIONS ] OBJECT { COMMAND | help }
       ip [ -force ] -batch filename
where  OBJECT := { link | address | addrlabel | route | rule | neighbor | ntable |
                   tunnel | tuntap | maddress | mroute | mrule | monitor | xfrm |
                   netns | l2tp | fou | tcp_metrics | token | netconf }
       OPTIONS := { -V[ersion] | -s[tatistics] | -d[etails] | -r[esolve] |
                    -h[uman-readable] | -iec |
                    -f[amily] { inet | inet6 | ipx | dnet | mpls | bridge | link } |
                    -4 | -6 | -I | -D | -B | -0 |
                    -l[oops] { maximum-addr-flush-attempts } | -br[ief] |
                    -o[neline] | -t[imestamp] | -ts[hort] | -b[atch] [filename] |
                    -rc[vbuf] [size] | -n[etns] name | -a[ll] | -c[olor]}
```

| ip command | Description |
| :--- | :--- |
| ip addr show | Display deep  information about all Network Interfaces |
| ip a show eth0 | Network Settings of specific Network Interface |
| ip link set eth0 \[up/down\] | Disable / Enbale Network interface |
| ip addr add 192.168.10.63/24 dev eth0 | Assign IP Address to specific Network Interface |
| ip addr del 192.168.10.63/24 dev eth0 | Remove IP Address |
| ip addr add broadcast 192.168.10.255 dev eth0 | Add Broadcast Address to the Network Interface |
| ip link set mtu 9000 dev eth0 AA:BB:CC:DD:EE:FF | Set mac Address of Network Interface |
| ip link set mtu 9000 dev eth0 | Set MTU of Network Device |

##### add alias to an Interface

```
ip addr add 192.168.10.64/24 dev eth0 label eth0:1
```

##### set promiscuous

```
ip link set eth1 promisc on
```

##### Change MTU

```
ip link set dev eth0 mtu 1600
```

### route



### arp



